{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<section class="hero-stage-ticker color-{{ section.settings.color_scheme }} gradient section-{{ section.id }}-padding">
  <div class="hero-stage-ticker__inner page-width">
    <div class="hero-stage-ticker__top-row">
      {%- if section.settings.show_logo -%}
        <div class="hero-stage-ticker__logo">{{ section.settings.logo_text }}</div>
      {%- endif -%}
      {%- if section.settings.show_menu_icon -%}
        <button class="hero-stage-ticker__menu-toggle" type="button" aria-label="Open navigation">
          <span></span><span></span>
        </button>
      {%- endif -%}
    </div>
    <div class="hero-stage-ticker__content">
      {%- if section.settings.eyebrow_text != blank -%}
        <p class="hero-stage-ticker__eyebrow">{{ section.settings.eyebrow_text }}</p>
      {%- endif -%}
      {%- if section.settings.heading != blank -%}
        <h1 class="hero-stage-ticker__heading">{{ section.settings.heading }}</h1>
      {%- endif -%}
      {%- if section.settings.subcopy != blank -%}
        <div class="hero-stage-ticker__subcopy rte">{{ section.settings.subcopy }}</div>
      {%- endif -%}
      <div class="hero-stage-ticker__badges">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'badge' -%}
              <span class="hero-stage-ticker__badge" {{ block.shopify_attributes }}>{{ block.settings.label }}</span>
          {%- endcase -%}
        {%- endfor -%}
      </div>
      <div class="hero-stage-ticker__ctas">
        {%- if section.settings.primary_cta_label != blank -%}
          <a
            {% if section.settings.primary_cta_link == blank %}
              role="link" aria-disabled="true"
            {% else %}
              href="{{ section.settings.primary_cta_link }}"
            {% endif %}
            class="button button--primary"
          >
            {{ section.settings.primary_cta_label | escape }}
          </a>
        {%- endif -%}
        {%- if section.settings.secondary_cta_label != blank -%}
          <a
            {% if section.settings.secondary_cta_link == blank %}
              role="link" aria-disabled="true"
            {% else %}
              href="{{ section.settings.secondary_cta_link }}"
            {% endif %}
            class="button button--secondary"
          >
            {{ section.settings.secondary_cta_label | escape }}
          </a>
        {%- endif -%}
      </div>
      <div class="hero-stage-ticker__secondary-links">
        {%- for block in section.blocks -%}
          {%- if block.type == 'secondary_link' -%}
            <a
              {% if block.settings.link == blank %}
                role="link" aria-disabled="true"
              {% else %}
                href="{{ block.settings.link }}"
              {% endif %}
              class="hero-stage-ticker__secondary-link"
              {{ block.shopify_attributes }}
            >
              {{ block.settings.label | escape }}
            </a>
          {%- endif -%}
        {%- endfor -%}
      </div>
    </div>
    <div class="hero-stage-ticker__ticker">
      <div class="hero-stage-ticker__ticker-inner" data-speed="{{ section.settings.ticker_speed }}">
        {{ section.settings.ticker_text }}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "COMMA – Hero + Navigation Stage",
  "tag": "section",
  "class": "section section--hero-stage-ticker",
  "settings": [
    { "type": "text", "id": "eyebrow_text", "label": "Eyebrow text", "default": "New release" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Hero headline" },
    { "type": "richtext", "id": "subcopy", "label": "Subcopy", "default": "<p>Short supporting copy for the hero section.<\/p>" },
    { "type": "text", "id": "primary_cta_label", "label": "Primary CTA label", "default": "Explore artists" },
    { "type": "url", "id": "primary_cta_link", "label": "Primary CTA link" },
    { "type": "text", "id": "secondary_cta_label", "label": "Secondary CTA label", "default": "View catalog" },
    { "type": "url", "id": "secondary_cta_link", "label": "Secondary CTA link" },
    { "type": "image_picker", "id": "background_image", "label": "Background image" },
    { "type": "color", "id": "background_color", "label": "Background color", "default": "#121212" },
    { "type": "checkbox", "id": "show_logo", "label": "Show COMMA logo text", "default": true },
    { "type": "text", "id": "logo_text", "label": "Logo text override", "default": "COMMA." },
    { "type": "checkbox", "id": "show_menu_icon", "label": "Show menu icon", "default": true },
    { "type": "text", "id": "ticker_text", "label": "Ticker text", "default": "Upcoming: Event / City / Date" },
    { "type": "range", "id": "ticker_speed", "min": 1, "max": 10, "step": 1, "default": 5, "label": "Ticker speed" },
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding top", "default": 0 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding bottom", "default": 0 }
  ],
  "blocks": [
    {
      "type": "badge",
      "name": "Badge",
      "limit": 4,
      "settings": [
        { "type": "text", "id": "label", "label": "Badge label", "default": "New" }
      ]
    },
    {
      "type": "secondary_link",
      "name": "Secondary link",
      "limit": 4,
      "settings": [
        { "type": "text", "id": "label", "label": "Link label", "default": "View tracklist" },
        { "type": "url", "id": "link", "label": "Link URL" }
      ]
    }
  ],
  "presets": [
    {
      "name": "COMMA – Hero + Navigation Stage"
    }
  ]
}
{% endschema %}
