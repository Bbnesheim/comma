{% doc %}
  @prompt
    Create a fully custom accordion section that replicates an image-with-text layout but replaces text with an advanced accordion. Requirements: Two-column layout with configurable image position (left/right), vertical alignment options, mobile stacking control. Advanced accordion with multiple independent items, smooth animations, customizable chevrons with rotation, zero spacing between items, hover effects with lift and shadow. Dynamic image swapping - each accordion item has its own image that displays when opened. Complete color customization system with section background, item backgrounds, hover states, and accessibility features. Comprehensive padding controls for section and content with mobile overrides. Full accessibility with semantic HTML, ARIA attributes, and keyboard navigation. All features configurable through Shopify Customizer with organized settings groups., Create a simple two-column section with image on left and content area on right. Include working section background color control and basic responsive layout. Test that background colors apply correctly to the entire section., Add a simple accordion with 3 items to the content area. Include basic expand/collapse functionality with proper ARIA accessibility. Keep styling minimal and ensure section background still works, Add color customization for accordion items - item background, text color, and hover states. Ensure all color controls work properly and don't conflict with section background., The section background color is not working. Please create a minimal test section with ONLY a colored background and some text. No accordion, no complex styling. Just prove that section background color control works properly first., Add a very simple accordion to the existing working section. Use minimal HTML structure - just basic div elements with click handlers. Do NOT add any additional background styling or containers that could interfere with the existing section background color that is already working., Add an image column to the left side of this working accordion section. Create a two-column layout where the image is on the left and the existing accordion stays on the right. Keep all existing background color functionality intact. Add image upload setting and responsive layout controls., Add color customization for individual accordion items - item background color, text color, and hover states. Ensure these new color controls don't interfere with the working section background color.

{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-test-section-{{ ai_gen_id }} {
    background-color: {{ block.settings.section_bg_color }};
    padding-top: {{ block.settings.section_padding_top }}px;
    padding-bottom: {{ block.settings.section_padding_bottom }}px;
    padding-left: {{ block.settings.section_padding_left }}px;
    padding-right: {{ block.settings.section_padding_right }}px;
    min-height: 200px;
    border-radius: {{ block.settings.section_border_radius }}px;
  }

  .ai-test-container-{{ ai_gen_id }} {
    max-width:1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: {{ block.settings.image_width }}% 1fr;
    gap: 40px;
    align-items: {{ block.settings.vertical_alignment }};
  }

  .ai-test-image-column-{{ ai_gen_id }} {
    {% if block.settings.image_position == 'right' %}
      order: 2;
    {% endif %}
    padding-top: {{ block.settings.image_padding_top }}px;
    padding-bottom: {{ block.settings.image_padding_bottom }}px;
    padding-left: {{ block.settings.image_padding_left }}px;
    padding-right: {{ block.settings.image_padding_right }}px;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .ai-test-image-wrapper-{{ ai_gen_id }} {
    width: 100%;
    height: {{ block.settings.image_height }}px;
    position: relative;
    overflow: hidden;border-radius: {{ block.settings.image_border_radius }}px;
    background-color: #f4f4f4;display: flex;
    align-items: center;
    justify-content: center;
  }

  .ai-test-image-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    object-fit: {{ block.settings.image_fit }};border-radius: {{ block.settings.image_border_radius }}px;
    transition: opacity 0.4s ease;
    position: absolute;
    top: 0;
    left: 0;opacity: 0;}

  .ai-test-image-{{ ai_gen_id }}.active {
    opacity: 1;
  }

  .ai-test-image-placeholder-{{ ai_gen_id }} {
    width: 60%;
    height: 60%;
    max-width: 200px;
    max-height: 200px;
    opacity: 0.5;
    transition: opacity 0.4s ease;
  }

  .ai-test-image-placeholder-{{ ai_gen_id }}.hidden {
    opacity: 0;
  }

  .ai-test-button-{{ ai_gen_id }} {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: {{ block.settings.button_padding_vertical }}px {{ block.settings.button_padding_horizontal }}px;
    background-color: {{ block.settings.button_bg_color }};
    color: {{ block.settings.button_text_color }};
    text-decoration: none;
    border: {{ block.settings.button_border_width }}px solid {{ block.settings.button_border_color }};
    border-radius: {{ block.settings.button_border_radius }}px;
    font-size: {{ block.settings.button_font_size }}px;
    font-family: {{ block.settings.button_font.family }}, {{ block.settings.button_font.fallback_families }};
    font-weight: {{ block.settings.button_font.weight }};
    font-style: {{ block.settings.button_font.style }};
    transition: all 0.3s ease;
    cursor: pointer;
    text-align: center;
    {% if block.settings.button_width == 'full' %}
      width:100%;
    {% else %}
      width: auto;
      align-self: {{ block.settings.button_alignment }};
    {% endif %}
  }

  .ai-test-button-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.button_hover_bg_color }};
    color: {{ block.settings.button_hover_text_color }};
    border-color: {{ block.settings.button_hover_border_color }};
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }

  .ai-test-content-column-{{ ai_gen_id }} {
    {% if block.settings.image_position == 'right' %}
      order: 1;
    {% endif %}
    padding-top: {{ block.settings.content_padding_top }}px;
    padding-bottom: {{ block.settings.content_padding_bottom }}px;
    padding-left: {{ block.settings.content_padding_left }}px;
    padding-right: {{ block.settings.content_padding_right }}px;
  }

  .ai-test-title-{{ ai_gen_id }} {
    color: {{ block.settings.text_color }};
    font-size: {{ block.settings.title_font_size }}px;
    font-family: {{ block.settings.title_font.family }}, {{ block.settings.title_font.fallback_families }};
    font-weight: {{ block.settings.title_font.weight }};
    font-style: {{ block.settings.title_font.style }};
    margin:0 0 20px;}

  .ai-test-text-{{ ai_gen_id }} {
    color: {{ block.settings.text_color }};
    font-size: {{ block.settings.description_font_size }}px;
    font-family: {{ block.settings.description_font.family }}, {{ block.settings.description_font.fallback_families }};
    font-weight: {{ block.settings.description_font.weight }};
    font-style: {{ block.settings.description_font.style }};
    margin: 0 0 30px;
  }

  .ai-accordion-{{ ai_gen_id }} {
    text-align: left;
  }

  .ai-accordion-item-{{ ai_gen_id }} {
    background-color: {{ block.settings.accordion_item_bg_color }};
    border-radius: {{ block.settings.accordion_border_radius }}px;
    margin-bottom: {{ block.settings.accordion_item_spacing }}px;
    transition: 
      background-color {{ block.settings.animation_speed }}ms ease,
      transform {{ block.settings.animation_speed }}ms ease,
      box-shadow {{ block.settings.animation_speed }}ms ease;box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);border: {{ block.settings.accordion_border_width }}px {{ block.settings.accordion_border_style }} {{ block.settings.accordion_border_color }};
  }

  .ai-accordion-item-{{ ai_gen_id }}:hover {
    background-color: {{ block.settings.accordion_item_hover_bg_color }};
    transform: translateY(-{{ block.settings.hover_lift_intensity }}px);
    box-shadow: 
      0 {{ block.settings.hover_shadow_intensity }}px {{ block.settings.hover_shadow_intensity | times: 2 }}px rgba(0, 0, 0, 0.15),
      0 1px 3px rgba(0, 0, 0, 0.1);
  }

  .ai-accordion-header-{{ ai_gen_id }} {
    padding: {{ block.settings.accordion_item_padding }}px;
    cursor: pointer;
    color: {{ block.settings.accordion_item_text_color }};
    font-weight: {{ block.settings.accordion_title_weight }};
    font-size: {{ block.settings.accordion_title_size }}px;
    font-family: {{ block.settings.accordion_title_font.family }}, {{ block.settings.accordion_title_font.fallback_families }};
    font-weight: {{ block.settings.accordion_title_font.weight }};
    font-style: {{ block.settings.accordion_title_font.style }};
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: color {{ block.settings.animation_speed }}ms ease;
    user-select: none;}

  .ai-accordion-item-{{ ai_gen_id }}:hover .ai-accordion-header-{{ ai_gen_id }} {
    color: {{ block.settings.accordion_item_hover_text_color }};
  }

  .ai-accordion-chevron-wrapper-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    justify-content: center;
    width: {{ block.settings.chevron_size }}px;
    height: {{ block.settings.chevron_size }}px;
    border-radius: {{ block.settings.chevron_border_radius }}px;
    background-color: {{ block.settings.chevron_bg_color }};
    transition:
      transform {{ block.settings.animation_speed }}ms ease,
      background-color {{ block.settings.animation_speed }}ms ease,
      color {{ block.settings.animation_speed }}ms ease;{% if block.settings.chevron_position == 'left' %}
      order: -1;
      margin-right: 12px;
    {% else %}
      margin-left: 12px;
    {% endif %}
  }

  .ai-accordion-item-{{ ai_gen_id }}:hover .ai-accordion-chevron-wrapper-{{ ai_gen_id }} {
    background-color: {{ block.settings.chevron_hover_bg_color }};
  }

  .ai-accordion-chevron-{{ ai_gen_id }} {
    transition: transform {{ block.settings.animation_speed }}ms ease;color: {{ block.settings.chevron_color }};
    display: flex;
    align-items: center;
    justify-content: center;width: 100%;
    height: 100%;
    transform: rotate(0deg);
  }

  .ai-accordion-chevron-{{ ai_gen_id }}.active {
    {% if block.settings.chevron_style == 'arrow_right' %}
      transform: rotate(90deg);
    {% elsif block.settings.chevron_style == 'arrow_down' %}
      transform: rotate(180deg);
    {% elsif block.settings.chevron_style == 'plus' %}
      transform: rotate(45deg);
    {% elsif block.settings.chevron_style == 'caret_right' %}
      transform: rotate(90deg);
    {% elsif block.settings.chevron_style == 'caret_down' %}
      transform: rotate(180deg);
    {% endif %}
  }

  .ai-accordion-chevron-{{ ai_gen_id }}::before {
    content: '';
    display: block;
    {% if block.settings.chevron_style == 'arrow_right' %}
      width: {{ block.settings.chevron_arrow_size }}px;
      height: {{ block.settings.chevron_arrow_size }}px;
      border-right: {{ block.settings.chevron_thickness }}px solid currentColor;
      border-top: {{ block.settings.chevron_thickness }}px solid currentColor;
      transform: rotate(45deg);
    {% elsif block.settings.chevron_style == 'arrow_down' %}
      width: {{ block.settings.chevron_arrow_size }}px;
      height: {{ block.settings.chevron_arrow_size }}px;
      border-right: {{ block.settings.chevron_thickness }}px solid currentColor;
      border-bottom: {{ block.settings.chevron_thickness }}px solid currentColor;
      transform: rotate(45deg);
    {% elsif block.settings.chevron_style == 'plus' %}
      width: {{ block.settings.chevron_arrow_size }}px;
      height: {{ block.settings.chevron_thickness }}px;
      background-color: currentColor;
      position: relative;
    {% elsif block.settings.chevron_style == 'caret_right' %}
      width: 0;
      height: 0;
      border-left: {{ block.settings.chevron_arrow_size }}px solid currentColor;
      border-top: {{ block.settings.chevron_arrow_size | divided_by: 2 }}px solid transparent;
      border-bottom: {{ block.settings.chevron_arrow_size | divided_by: 2 }}px solid transparent;
    {% elsif block.settings.chevron_style == 'caret_down' %}
      width: 0;
      height: 0;
      border-top: {{ block.settings.chevron_arrow_size }}px solid currentColor;
      border-left: {{ block.settings.chevron_arrow_size | divided_by: 2 }}px solid transparent;
      border-right: {{ block.settings.chevron_arrow_size | divided_by: 2 }}px solid transparent;
    {% endif %}
  }

  {% if block.settings.chevron_style == 'plus' %}
    .ai-accordion-chevron-{{ ai_gen_id }}::after {
      content: '';
      position: absolute;
      width: {{ block.settings.chevron_thickness }}px;
      height: {{ block.settings.chevron_arrow_size }}px;
      background-color: currentColor;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);}
  {% endif %}

  .ai-accordion-item-{{ ai_gen_id }}:hover .ai-accordion-chevron-{{ ai_gen_id }} {
    color: {{ block.settings.chevron_hover_color }};
  }

  .ai-accordion-content-{{ ai_gen_id }} {
    overflow: hidden;
    transition: 
      max-height {{ block.settings.animation_speed }}ms ease,
      padding {{ block.settings.animation_speed }}ms ease,
      opacity {{ block.settings.animation_speed }}ms ease;
    max-height: 0;
    opacity: 0;
    padding: 0 {{ block.settings.accordion_item_padding }}px;
  }

  .ai-accordion-content-{{ ai_gen_id }}.active {
    max-height: 500px;
    opacity: 1;
    padding: 0 {{ block.settings.accordion_item_padding }}px {{ block.settings.accordion_item_padding }}px {{ block.settings.accordion_item_padding }}px;
  }

  .ai-accordion-content-inner-{{ ai_gen_id }} {
    color: {{ block.settings.accordion_content_text_color }};
    font-size: {{ block.settings.accordion_content_size }}px;
    font-family: {{ block.settings.accordion_content_font.family }}, {{ block.settings.accordion_content_font.fallback_families }};
    font-weight: {{ block.settings.accordion_content_font.weight }};
    font-style: {{ block.settings.accordion_content_font.style }};
    line-height: 1.6;
    transition: color {{ block.settings.animation_speed }}ms ease;}

  .ai-accordion-item-{{ ai_gen_id }}:hover .ai-accordion-content-inner-{{ ai_gen_id }} {
    color: {{ block.settings.accordion_content_hover_text_color }};
  }

  @media screen and (max-width: 749px) {
    .ai-test-section-{{ ai_gen_id }} {
      padding-top: {{ block.settings.mobile_section_padding_top }}px;
      padding-bottom: {{ block.settings.mobile_section_padding_bottom }}px;
      padding-left: {{ block.settings.mobile_section_padding_left }}px;
      padding-right: {{ block.settings.mobile_section_padding_right }}px;
    }

    .ai-test-container-{{ ai_gen_id }} {
      grid-template-columns:1fr;
      gap: 30px;
      {% if block.settings.mobile_layout == 'image_first' %}
        grid-template-rows: auto 1fr;
      {% else %}
        grid-template-rows: 1fr auto;
      {% endif %}
    }

    .ai-test-image-column-{{ ai_gen_id }} {
      {% if block.settings.mobile_layout == 'image_first' %}
        order: 1;
      {% else %}
        order: 2;
      {% endif %}
      padding-top: {{ block.settings.mobile_image_padding_top }}px;
      padding-bottom: {{ block.settings.mobile_image_padding_bottom }}px;
      padding-left: {{ block.settings.mobile_image_padding_left }}px;
      padding-right: {{ block.settings.mobile_image_padding_right }}px;
    }

    .ai-test-content-column-{{ ai_gen_id }} {
      {% if block.settings.mobile_layout == 'image_first' %}
        order: 2;
      {% else %}
        order: 1;
      {% endif %}
      padding-top: {{ block.settings.mobile_content_padding_top }}px;
      padding-bottom: {{ block.settings.mobile_content_padding_bottom }}px;
      padding-left: {{ block.settings.mobile_content_padding_left }}px;
      padding-right: {{ block.settings.mobile_content_padding_right }}px;
    }

    .ai-test-image-wrapper-{{ ai_gen_id }} {
      height: {{ block.settings.mobile_image_height }}px;}

    .ai-test-button-{{ ai_gen_id }} {
      padding: {{ block.settings.button_padding_vertical | times: 0.8 }}px {{ block.settings.button_padding_horizontal | times: 0.8 }}px;
      font-size: {{ block.settings.button_font_size | times: 0.9 }}px;
      width: 100%;
      align-self: stretch;
    }

    .ai-test-title-{{ ai_gen_id }} {
      font-size: {{ block.settings.title_font_size | times: 0.9 }}px;}

    .ai-test-text-{{ ai_gen_id }} {
      font-size: {{ block.settings.description_font_size | times: 0.9 }}px;
    }

    .ai-accordion-header-{{ ai_gen_id }} {
      padding: {{ block.settings.mobile_accordion_padding }}px;
      font-size: {{ block.settings.accordion_title_size | times: 0.9 }}px;}

    .ai-accordion-content-{{ ai_gen_id }} {
      padding: 0 {{ block.settings.mobile_accordion_padding }}px;}

    .ai-accordion-content-{{ ai_gen_id }}.active {
      padding: 0 {{ block.settings.mobile_accordion_padding }}px {{ block.settings.mobile_accordion_padding }}px {{ block.settings.mobile_accordion_padding }}px;
    }

    .ai-accordion-chevron-wrapper-{{ ai_gen_id }} {
      width: {{ block.settings.chevron_size | times: 0.8 }}px;
      height: {{ block.settings.chevron_size | times: 0.8 }}px;
    }

    .ai-accordion-chevron-{{ ai_gen_id }}::before {
      {% if block.settings.chevron_style == 'arrow_right' or block.settings.chevron_style == 'arrow_down' %}
        width: {{ block.settings.chevron_arrow_size | times: 0.8 }}px;
        height: {{ block.settings.chevron_arrow_size | times: 0.8 }}px;{% elsif block.settings.chevron_style == 'plus' %}
        width: {{ block.settings.chevron_arrow_size | times: 0.8 }}px;
      {% elsif block.settings.chevron_style == 'caret_right' %}
        border-left-width: {{ block.settings.chevron_arrow_size | times: 0.8 }}px;
        border-top-width: {{ block.settings.chevron_arrow_size | times: 0.8 | divided_by: 2 }}px;
        border-bottom-width: {{ block.settings.chevron_arrow_size | times: 0.8 | divided_by: 2 }}px;
      {% elsif block.settings.chevron_style == 'caret_down' %}
        border-top-width: {{ block.settings.chevron_arrow_size | times: 0.8 }}px;
        border-left-width: {{ block.settings.chevron_arrow_size | times: 0.8 | divided_by: 2 }}px;
        border-right-width: {{ block.settings.chevron_arrow_size | times: 0.8 | divided_by: 2 }}px;
      {% endif %}
    }

    {% if block.settings.chevron_style == 'plus' %}
      .ai-accordion-chevron-{{ ai_gen_id }}::after {
        height: {{ block.settings.chevron_arrow_size | times: 0.8 }}px;
      }
    {% endif %}

    .ai-accordion-item-{{ ai_gen_id }}:hover {
      transform: translateY(-{{ block.settings.hover_lift_intensity | times: 0.5 }}px);
    }
  }
{% endstyle %}<div
  class="ai-test-section-{{ ai_gen_id }}"
  {{ block.shopify_attributes }}
>
  <div class="ai-test-container-{{ ai_gen_id }}">
    <div class="ai-test-image-column-{{ ai_gen_id }}">
      <div class="ai-test-image-wrapper-{{ ai_gen_id }}">
        {% for i in (1..block.settings.accordion_items_count) %}
          {% liquid
            assign image_key = 'accordion_item_' | append: i | append: '_image'
            assign item_image = block.settings[image_key]%}
          
          {% if item_image %}
            <img
              src="{{ item_image | image_url: width: 800 }}"
              alt="{{ item_image.alt | escape }}"
              class="ai-test-image-{{ ai_gen_id }} {% if i == block.settings.default_open_item %}active{% endif %}"
              loading="lazy"
              width="{{ item_image.width }}"
              height="{{ item_image.height }}"data-accordion-image="{{ i }}"
            >
          {% endif %}
        {% endfor %}
        <div class="ai-test-image-placeholder-{{ ai_gen_id }} {% if block.settings.default_open_item > 0 %}hidden{% endif %}">
          {{ 'image' | placeholder_svg_tag }}
        </div>
      </div>

      {% if block.settings.show_button and block.settings.button_text != blank %}
        <a
          href="{{ block.settings.button_link }}"
          class="ai-test-button-{{ ai_gen_id }}"
          {% if block.settings.button_link == blank %}
            role="button"
            tabindex="0"
          {% endif %}
        >
          {{ block.settings.button_text }}
        </a>
      {% endif %}
    </div>

    <div class="ai-test-content-column-{{ ai_gen_id }}">
      <h2 class="ai-test-title-{{ ai_gen_id }}">{{ block.settings.title }}</h2>
      <p class="ai-test-text-{{ ai_gen_id }}">{{ block.settings.description }}</p><image-swap-accordion-{{ ai_gen_id }} class="ai-accordion-{{ ai_gen_id }}">
        {% for i in (1..block.settings.accordion_items_count) %}
          {% liquid
            assign title_key = 'accordion_item_' | append: i | append: '_title'
            assign content_key = 'accordion_item_' | append: i | append: '_content'
            assign image_key = 'accordion_item_' | append: i | append: '_image'
            assign item_title = block.settings[title_key]
            assign item_content = block.settings[content_key]
            assign item_image = block.settings[image_key]%}
          {% if item_title != blank %}
            <div 
              class="ai-accordion-item-{{ ai_gen_id }}" 
              data-accordion-item="{{ i }}"
              {% if item_image %}
                data-has-image="true"
              {% endif %}
            >
              <div 
                class="ai-accordion-header-{{ ai_gen_id }}" 
                data-accordion-toggle
                role="button" 
                tabindex="0" 
                aria-expanded="{% if i == block.settings.default_open_item %}true{% else %}false{% endif %}">
                <span>{{ item_title }}</span>
                <div class="ai-accordion-chevron-wrapper-{{ ai_gen_id }}">
                  <span class="ai-accordion-chevron-{{ ai_gen_id }} {% if i == block.settings.default_open_item %}active{% endif %}"></span>
                </div>
              </div>
              <div class="ai-accordion-content-{{ ai_gen_id }} {% if i == block.settings.default_open_item %}active{% endif %}">
                <div class="ai-accordion-content-inner-{{ ai_gen_id }}">
                  {{ item_content }}
                </div>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </image-swap-accordion-{{ ai_gen_id }}>
    </div>
  </div>
</div><script>
  (function() {
    class ImageSwapAccordion{{ ai_gen_id }} extends HTMLElement {
      connectedCallback() {
        this.lastActiveImage = {{ block.settings.default_open_item | default: 0 }};
        this.imageWrapper = document.querySelector('.ai-test-image-wrapper-{{ ai_gen_id }}');
        this.placeholder = this.imageWrapper.querySelector('.ai-test-image-placeholder-{{ ai_gen_id }}');
        this.setupAccordion();
      }

      setupAccordion() {
        const headers = this.querySelectorAll('[data-accordion-toggle]');
        
        headers.forEach(header => {
          header.addEventListener('click', () => {
            this.handleAccordionClick(header);
          });

          header.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              this.handleAccordionClick(header);
            }
          });
        });
      }

      handleAccordionClick(header) {
        const item = header.parentElement;
        const itemNumber = parseInt(item.getAttribute('data-accordion-item'));
        const content = item.querySelector('.ai-accordion-content-{{ ai_gen_id }}');
        const chevron = header.querySelector('.ai-accordion-chevron-{{ ai_gen_id }}');
        const isActive = content.classList.contains('active');
        const hasImage = item.getAttribute('data-has-image') === 'true';

        if (isActive) {
          content.classList.remove('active');
          chevron.classList.remove('active');
          header.setAttribute('aria-expanded', 'false');} else {
          const allHeaders = this.querySelectorAll('[data-accordion-toggle]');
          allHeaders.forEach(h => {
            const otherItem = h.parentElement;
            const otherContent = otherItem.querySelector('.ai-accordion-content-{{ ai_gen_id }}');
            const otherChevron = h.querySelector('.ai-accordion-chevron-{{ ai_gen_id }}');
            
            if (otherItem !== item) {
              otherContent.classList.remove('active');
              otherChevron.classList.remove('active');
              h.setAttribute('aria-expanded', 'false');
            }
          });

          content.classList.add('active');
          chevron.classList.add('active');
          header.setAttribute('aria-expanded', 'true');

          if (hasImage) {
            this.showItemImage(itemNumber);
          }
        }
      }

      showItemImage(itemNumber) {
        const allImages = this.imageWrapper.querySelectorAll('[data-accordion-image]');
        
        allImages.forEach(img => {
          img.classList.remove('active');
        });

        const targetImage = this.imageWrapper.querySelector(`[data-accordion-image="${itemNumber}"]`);
        if (targetImage) {
          this.placeholder.classList.add('hidden');
          targetImage.classList.add('active');
          this.lastActiveImage = itemNumber;
        }
      }
    }

    customElements.define('image-swap-accordion-{{ ai_gen_id }}', ImageSwapAccordion{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Image & Accordion Section",
  "tag": "section",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "select",
      "id": "vertical_alignment",
      "label": "Vertical alignment",
      "options": [
        {
          "value": "start",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "end",
          "label": "Bottom"
        }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "mobile_layout",
      "label": "Mobile layout",
      "options": [
        {
          "value": "content_first",
          "label": "Content first"
        },
        {
          "value": "image_first",
          "label": "Image first"
        }
      ],
      "default": "image_first"
    },
    {
      "type": "range",
      "id": "section_border_radius",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Section border radius",
      "default": 0
    },
    {
      "type": "header",
      "content": "Button Settings"
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "label": "Show button",
      "default": true
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Learn More"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button link"
    },
    {
      "type": "select",
      "id": "button_width",
      "label": "Button width",
      "options": [
        {
          "value": "auto",
          "label": "Auto"
        },
        {
          "value": "full",
          "label": "Full width"
        }
      ],
      "default": "auto"
    },
    {
      "type": "select",
      "id": "button_alignment",
      "label": "Button alignment",
      "options": [
        {
          "value": "flex-start",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "flex-end",
          "label": "Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "font_picker",
      "id": "button_font",
      "label": "Button font",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "button_padding_vertical",
      "min": 8,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Button vertical padding",
      "default": 12
    },
    {
      "type": "range",
      "id": "button_padding_horizontal",
      "min": 16,
      "max": 48,
      "step": 4,
      "unit": "px",
      "label": "Button horizontal padding",
      "default": 24
    },
    {
      "type": "range",
      "id": "button_font_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Button font size",
      "default": 16
    },
    {
      "type": "range",
      "id": "button_border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Button border radius",
      "default": 6
    },
    {
      "type": "range",
      "id": "button_border_width",
      "min": 0,
      "max": 4,
      "step": 1,
      "unit": "px",
      "label": "Button border width",
      "default": 1
    },
    {
      "type": "color",
      "id": "button_bg_color",
      "label": "Button background color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_border_color",
      "label": "Button border color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_hover_bg_color",
      "label": "Button hover background",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_hover_text_color",
      "label": "Button hover text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_border_color",
      "label": "Button hover border color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Accordion Settings"
    },
    {
      "type": "range",
      "id": "accordion_items_count",
      "min": 3,
      "max": 10,
      "step": 1,
      "label": "Number of accordion items",
      "default": 5
    },
    {
      "type": "range",
      "id": "default_open_item",
      "min": 0,
      "max": 10,
      "step": 1,
      "label": "Default open item (0 = none)",
      "default": 1
    },
    {
      "type": "range",
      "id": "animation_speed",
      "min": 200,
      "max": 800,
      "step": 50,
      "unit": "ms",
      "label": "Animation speed",
      "default": 300
    },
    {
      "type": "range",
      "id": "hover_lift_intensity",
      "min": 0,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Hover lift intensity",
      "default": 3
    },
    {
      "type": "range",
      "id": "hover_shadow_intensity",
      "min": 2,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Hover shadow intensity",
      "default": 8
    },
    {
      "type": "range",
      "id": "accordion_item_spacing",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Space between items",
      "default": 8
    },
    {
      "type": "range",
      "id": "accordion_item_padding",
      "min": 10,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Item padding (desktop)",
      "default": 20
    },
    {
      "type": "range",
      "id": "mobile_accordion_padding",
      "min": 8,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Item padding (mobile)",
      "default": 16
    },
    {
      "type": "range",
      "id": "accordion_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Accordion item border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "accordion_border_width",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 1
    },
    {
      "type": "select",
      "id": "accordion_border_style",
      "label": "Border style",
      "options": [
        {
          "value": "solid",
          "label": "Solid"
        },
        {
          "value": "dashed",
          "label": "Dashed"
        },
        {
          "value": "dotted",
          "label": "Dotted"
        }
      ],
      "default": "solid"
    },
    {
      "type": "color",
      "id": "accordion_border_color",
      "label": "Border color",
      "default": "#e5e5e5"
    },
    {
      "type": "select",
      "id": "chevron_style",
      "label": "Chevron style",
      "options": [
        {
          "value": "arrow_right",
          "label": "Arrow Right"
        },
        {
          "value": "arrow_down",
          "label": "Arrow Down"
        },
        {
          "value": "plus",
          "label": "Plus Sign"
        },
        {
          "value": "caret_right",
          "label": "Caret Right"
        },
        {
          "value": "caret_down",
          "label": "Caret Down"
        }
      ],
      "default": "arrow_right"
    },
    {
      "type": "select",
      "id": "chevron_position",
      "label": "Chevron position",
      "options": [
        {
          "value": "right",
          "label": "Right"
        },
        {
          "value": "left",
          "label": "Left"
        }
      ],
      "default": "right"
    },
    {
      "type": "range",
      "id": "chevron_size",
      "min": 20,
      "max": 50,
      "step": 2,
      "unit": "px",
      "label": "Chevron container size",
      "default": 32
    },
    {
      "type": "range",
      "id": "chevron_arrow_size",
      "min": 6,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Arrow size",
      "default": 10
    },
    {
      "type": "range",
      "id": "chevron_thickness",
      "min": 1,
      "max": 4,
      "step": 1,
      "unit": "px",
      "label": "Arrow thickness",
      "default": 2
    },
    {
      "type": "range",
      "id": "chevron_border_radius",
      "min": 0,
      "max": 25,
      "step": 1,
      "unit": "px",
      "label": "Chevron border radius",
      "default": 6
    },
    {
      "type": "color",
      "id": "chevron_bg_color",
      "label": "Chevron background color",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "chevron_hover_bg_color",
      "label": "Chevron hover background",
      "default": "#e9ecef"
    },
    {
      "type": "color",
      "id": "chevron_color",
      "label": "Chevron arrow color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "chevron_hover_color",
      "label": "Chevron arrow hover color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Image Settings"
    },
    {
      "type": "range",
      "id": "image_width",
      "min": 20,
      "max": 70,
      "step": 5,
      "unit": "%",
      "label": "Image column width",
      "default": 50
    },
    {
      "type": "range",
      "id": "image_height",
      "min": 200,
      "max": 800,
      "step": 50,
      "unit": "px",
      "label": "Image height (desktop)",
      "default": 400
    },
    {
      "type": "range",
      "id": "mobile_image_height",
      "min": 150,
      "max": 500,
      "step": 25,
      "unit": "px",
      "label": "Image height (mobile)",
      "default": 250
    },
    {
      "type": "select",
      "id": "image_fit",
      "label": "Image fit",
      "options": [
        {
          "value": "cover",
          "label": "Cover"
        },
        {
          "value": "contain",
          "label": "Contain"
        },
        {
          "value": "fill",
          "label": "Fill"
        }
      ],
      "default": "cover"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "min": 0,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Image border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "image_padding_top",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Image top padding (desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "image_padding_bottom",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Image bottom padding (desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "image_padding_left",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Image left padding (desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "image_padding_right",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Image right padding (desktop)",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile_image_padding_top",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Image top padding (mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile_image_padding_bottom",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Image bottom padding (mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile_image_padding_left",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Image left padding (mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile_image_padding_right",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Image right padding (mobile)",
      "default": 0
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "font_picker",
      "id": "title_font",
      "label": "Title font",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "title_font_size",
      "min": 16,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Title font size",
      "default": 32
    },
    {
      "type": "font_picker",
      "id": "description_font",
      "label": "Description font",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "description_font_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Description font size",
      "default": 18
    },
    {
      "type": "font_picker",
      "id": "accordion_title_font",
      "label": "Accordion title font",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "accordion_title_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Accordion title font size",
      "default": 16
    },
    {
      "type": "font_picker",
      "id": "accordion_content_font",
      "label": "Accordion content font",
      "default": "helvetica_n4"
    },
    {
      "type": "range",
      "id": "accordion_content_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Accordion content font size",
      "default": 14
    },
    {
      "type": "header",
      "content": "Section Padding - Desktop"
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Top padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Bottom padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "section_padding_left",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Left padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "section_padding_right",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Right padding",
      "default": 20
    },
    {
      "type": "header",
      "content": "Section Padding - Mobile"
    },
    {
      "type": "range",
      "id": "mobile_section_padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Top padding (mobile)",
      "default": 30
    },
    {
      "type": "range",
      "id": "mobile_section_padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Bottom padding (mobile)",
      "default": 30
    },
    {
      "type": "range",
      "id": "mobile_section_padding_left",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Left padding (mobile)",
      "default": 15
    },
    {
      "type": "range",
      "id": "mobile_section_padding_right",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Right padding (mobile)",
      "default": 15
    },
    {
      "type": "header",
      "content": "Content Column Padding - Desktop"
    },
    {
      "type": "range",
      "id": "content_padding_top",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Top padding",
      "default": 0
    },
    {
      "type": "range",
      "id": "content_padding_bottom",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Bottom padding",
      "default": 0
    },
    {
      "type": "range",
      "id": "content_padding_left",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Left padding",
      "default": 0
    },
    {
      "type": "range",
      "id": "content_padding_right",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Right padding",
      "default": 0
    },
    {
      "type": "header",
      "content": "Content Column Padding - Mobile"
    },
    {
      "type": "range",
      "id": "mobile_content_padding_top",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Top padding (mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile_content_padding_bottom",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Bottom padding (mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile_content_padding_left",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Left padding (mobile)",
      "default": 0
    },
    {
      "type": "range",
      "id": "mobile_content_padding_right",
      "min": 0,
      "max": 80,
      "step": 5,
      "unit": "px",
      "label": "Right padding (mobile)",
      "default": 0
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Image & Accordion Section"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "This section combines an image with an interactive accordion for a dynamic layout."
    },
    {
      "type": "header",
      "content": "Section Colors"
    },
    {
      "type": "color",
      "id": "section_bg_color",
      "label": "Section background color",
      "default": "#f0f8ff"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Title & description color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Accordion Colors"
    },
    {
      "type": "color",
      "id": "accordion_item_bg_color",
      "label": "Item background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "accordion_item_hover_bg_color",
      "label": "Item hover background color",
      "default": "#f8f9fa"
    },
    {
      "type": "color",
      "id": "accordion_item_text_color",
      "label": "Item title color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "accordion_item_hover_text_color",
      "label": "Item title hover color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "accordion_content_text_color",
      "label": "Content text color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "accordion_content_hover_text_color",
      "label": "Content text hover color",
      "default": "#333333"
    },
    {
      "type": "header",
      "content": "Accordion Item1"
    },
    {
      "type": "text",
      "id": "accordion_item_1_title",
      "label": "Item1 title",
      "default": "First accordion item"
    },
    {
      "type": "textarea",
      "id": "accordion_item_1_content",
      "label": "Item 1 content",
      "default": "This is the content for the first accordion item."
    },
    {
      "type": "image_picker",
      "id": "accordion_item_1_image",
      "label": "Item 1 image"
    },
    {
      "type": "header",
      "content": "Accordion Item2"
    },
    {
      "type": "text",
      "id": "accordion_item_2_title",
      "label": "Item 2 title",
      "default": "Second accordion item"
    },
    {
      "type": "textarea",
      "id": "accordion_item_2_content",
      "label": "Item 2 content",
      "default": "This is the content for the second accordion item."
    },
    {
      "type": "image_picker",
      "id": "accordion_item_2_image",
      "label": "Item 2 image"
    },
    {
      "type": "header",
      "content": "Accordion Item3"
    },
    {
      "type": "text",
      "id": "accordion_item_3_title",
      "label": "Item 3 title",
      "default": "Third accordion item"
    },
    {
      "type": "textarea",
      "id": "accordion_item_3_content",
      "label": "Item 3 content",
      "default": "This is the content for the third accordion item."
    },
    {
      "type": "image_picker",
      "id": "accordion_item_3_image",
      "label": "Item 3 image"
    },
    {
      "type": "header",
      "content": "Accordion Item 4"
    },
    {
      "type": "text",
      "id": "accordion_item_4_title",
      "label": "Item 4 title",
      "default": "Fourth accordion item"
    },
    {
      "type": "textarea",
      "id": "accordion_item_4_content",
      "label": "Item 4 content",
      "default": "This is the content for the fourth accordion item."
    },
    {
      "type": "image_picker",
      "id": "accordion_item_4_image",
      "label": "Item 4 image"
    },
    {
      "type": "header",
      "content": "Accordion Item 5"
    },
    {
      "type": "text",
      "id": "accordion_item_5_title",
      "label": "Item 5 title",
      "default": "Fifth accordion item"
    },
    {
      "type": "textarea",
      "id": "accordion_item_5_content",
      "label": "Item 5 content",
      "default": "This is the content for the fifth accordion item."
    },
    {
      "type": "image_picker",
      "id": "accordion_item_5_image",
      "label": "Item 5 image"
    },
    {
      "type": "header",
      "content": "Accordion Item 6"
    },
    {
      "type": "text",
      "id": "accordion_item_6_title",
      "label": "Item 6 title"
    },
    {
      "type": "textarea",
      "id": "accordion_item_6_content",
      "label": "Item 6 content"
    },
    {
      "type": "image_picker",
      "id": "accordion_item_6_image",
      "label": "Item 6 image"
    },
    {
      "type": "header",
      "content": "Accordion Item 7"
    },
    {
      "type": "text",
      "id": "accordion_item_7_title",
      "label": "Item 7 title"
    },
    {
      "type": "textarea",
      "id": "accordion_item_7_content",
      "label": "Item 7 content"
    },
    {
      "type": "image_picker",
      "id": "accordion_item_7_image",
      "label": "Item 7 image"
    },
    {
      "type": "header",
      "content": "Accordion Item 8"
    },
    {
      "type": "text",
      "id": "accordion_item_8_title",
      "label": "Item 8 title"
    },
    {
      "type": "textarea",
      "id": "accordion_item_8_content",
      "label": "Item 8 content"
    },
    {
      "type": "image_picker",
      "id": "accordion_item_8_image",
      "label": "Item 8 image"
    },
    {
      "type": "header",
      "content": "Accordion Item 9"
    },
    {
      "type": "text",
      "id": "accordion_item_9_title",
      "label": "Item 9 title"
    },
    {
      "type": "textarea",
      "id": "accordion_item_9_content",
      "label": "Item 9 content"
    },
    {
      "type": "image_picker",
      "id": "accordion_item_9_image",
      "label": "Item 9 image"
    },
    {
      "type": "header",
      "content": "Accordion Item 10"
    },
    {
      "type": "text",
      "id": "accordion_item_10_title",
      "label": "Item 10 title"
    },
    {
      "type": "textarea",
      "id": "accordion_item_10_content",
      "label": "Item 10 content"
    },
    {
      "type": "image_picker",
      "id": "accordion_item_10_image",
      "label": "Item 10 image"
    }
  ],
  "presets": [
    {
      "name": "Image & Accordion Section"
    }
  ]
}
{% endschema %}